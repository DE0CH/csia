{% extends "codestudy/base.html" %}
{% block title %}
    Add Paper
{% endblock %}
{% block content %}
    <div class="ui text container">
        <h1 style="text-align: center">Add Paper to Code Study</h1>
        <div class="ui form">

            <form method="post">
                {% csrf_token %}
                <div class="field">
                    <div class="ui left icon input">
                        <i class="sticky note icon"></i>
                        <input type="text" name="title" placeholder="Title">
                    </div>
                </div>
                {% for tag_class in tag_classes %}
                    <div class="field">
                        <select class="ui fluid search dropdown" multiple name="{{ tag_class.name }}">
                            <option value="">{{ tag_class.name }}</option>
                            {% for tag in tag_class.tag_set.all %}
                                <option value="{{ tag.name }}">{{ tag.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                {% endfor %}

                <div class="field">
                    <div class="ui middle aligned grid">
                        <div class="twelve wide column">
                            <label for="pdf" hidden>PDF of the Paper</label>
                            <input type="file" name="pdf" id="pdf" accept=".pdf">
                        </div>
                        <div class="four wide column">
                            <button type="button" class="ui fluid primary button" id="upload-pdf" onclick="uploadPdf()">Upload Paper</button>
                        </div>
                    </div>

                </div>

                <button type="submit" class="ui fluid large teal button">Add</button>
            </form>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script>
        $('#menu-add-paper').addClass('active');
        $('.ui.dropdown').dropdown();
        async function uploadPdf() {
            const button = $('#upload-pdf');
            button.addClass('loading');
            await new Promise(resolve => setTimeout(resolve, 2000));
            button.removeClass('loading');
            button.addClass('positive');
            button.addClass('disabled');
            button.text('Uploaded');
        }

    </script>
{% endblock %}